
<div class="flex flex-col">
    <h1 class="flex text-xl font-semibold mb-7 justify-center">Lista de Productos:</h1>
    <ul class="flex flex-wrap gap-5 justify-center">
        {{#each result.payload}}
            <li class="flex flex-col border-2 rounded shadow-lg p-3 gap-4 items-center justify-center"><p class="border rounded bg-teal-800 p-2 font-medium text-base"> -id: {{_id}} <br> -Title: {{title}}<br> -Description: {{description}}<br> -Price: {{price}}<br> -Code: {{code}}<br> -Stock: {{stock}}<br> -Category:
            {{category}}<br> -Status: {{status}}<br><br></p> <button class="opacity-50 hover:opacity-100" onClick="addToCart('{{this._id}}')"><i class="fa-solid fa-cart-arrow-down fa-2xl"></i></img></button></li>
        {{/each}}
    </ul>
    <br><br>
    <div class="flex flex-col items-center">
        <p class="border rounded border-slate-800 border-2 bg-teal-100 p-1 text-sm shadow-lg">Limite por pagina: {{result.limit}}</p><br>

        {{#if result.query}}
        <p class="font-medium">Filtro:{{result.query}}</p><br>
        {{/if}}

        {{#if result.hasPrevPage}}
        <a class="border border-2 rounded p-1 border-teal-950 bg-teal-800 hover:opacity-75 text-neutral-50" href="?page={{result.prevPage}}&limit{{result.limit}}{{#if result.query}}&query={{result.query}}{{/if}}">Anterior</a>
        {{/if}}

        <p class="font-medium">Pagina: {{result.page}} de {{result.totalPages}}</p>

        {{#if result.hasNextPage}}
        <a class="border border-2 rounded p-1 border-teal-950 bg-teal-800 hover:opacity-75 text-neutral-50" href="?page={{result.nextPage}}&limit={{result.limit}}{{#if result.query}}&query{{result.query}}{{/if}}">Siguiente</a>
        {{/if}}
    </div>
</div>

<script>
    function addToCart(productId){
        const cartId= '663ad3e7f12d12e384cd4eec';
        fetch(`/api/cart/${cartId}/products/${productId}`, {
            method: 'POST',
            headers:{
                'Contente-Type': 'application/json'
            }
        }).then(resp=>resp.json())
        .then(data=>{
            console.log(data);
        })
        .catch(error=>{
            console.log(error);
        })
    }
</script>